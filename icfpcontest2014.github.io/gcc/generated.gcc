LDC 0
LDF 680
CONS
RTN
LD 0 1
LDC 0
CEQ
TSEL 8 20
LD 0 0
ATOM
TSEL 11 15
LD 0 0
RTN
LDC 1
TSEL 18 0
LD 0 0
CAR
RTN
LDC 1
TSEL 27 0
LD 0 0
CDR
LD 0 1
LDC 1
SUB
LDF 4
AP 2	 ;      tup_nth(lrest(list),s-1)
RTN
LD 0 0
ATOM
RTN
RTN
LD 0 0
LD 0 0
DBUG
RTN
LD 0 1
RTN
RTN
LD 0 0
LD 0 1
CONS
RTN
LD 0 0
LDC 0
CEQ
TSEL 47 61
LD 0 1
LDC 0
LDF 4
AP 2
LD 0 1
LDC 1
LDF 4
AP 2
LDC 1
SUB
CONS
RTN
LDC 1
TSEL 61 0

LD 0 0
LDC 1
CEQ
TSEL 65 79
LD 0 1
LDC 0
LDF 4
AP 2
LDC 1
ADD
LD 0 1
LDC 1
LDF 4
AP 2
CONS
RTN
LDC 1
TSEL 79 0

LD 0 0
LDC 2
CEQ
TSEL 83 97
LD 0 1
LDC 0
LDF 4
AP 2
LD 0 1
LDC 1
LDF 4
AP 2
LDC 1
ADD
CONS
RTN
LDC 1
TSEL 97 0

LD 0 0
LDC 3
CEQ
TSEL 101 115
LD 0 1
LDC 0
LDF 4
AP 2
LDC 1
SUB
LD 0 1
LDC 1
LDF 4
AP 2
CONS
RTN
LDC 1
TSEL 115 0

RTN
LD 0 0
LDC 0
LDF 4
AP 2
LD 0 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 0
LDC 1
LDF 4
AP 2
LDC 1
SUB
LD 0 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 144 148
LDC 0
RTN
LDC 1
TSEL 148 0

LD 0 0
LDC 0
LDF 4
AP 2
LD 0 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 0
LDC 1
LDF 4
AP 2
LDC 1
ADD
LD 0 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 176 180
LDC 2
RTN
LDC 1
TSEL 180 0

LD 0 0
LDC 0
LDF 4
AP 2
LDC 1
ADD
LD 0 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 0
LDC 1
LDF 4
AP 2
LD 0 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 208 212
LDC 1
RTN
LDC 1
TSEL 212 0

LD 0 0
LDC 0
LDF 4
AP 2
LDC 1
SUB
LD 0 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 0
LDC 1
LDF 4
AP 2
LD 0 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 240 244
LDC 3
RTN
LDC 1
TSEL 244 0

RTN
LD 0 0
LD 0 1
LDC 1
LDF 4
AP 2
LDF 4
AP 2
LD 0 1
LDC 0
LDF 4
AP 2
LDF 4
AP 2
RTN
RTN
LDC -1
LDC -1
LDC -1
LDF 267
AP 3
LDC 1
TSEL 306 0
LDC 0
ST 0 0

LDC 0
ST 0 1

LDC 4
LD 0 1
CGT
LDC 0
CEQ
TSEL 303 277

LD 0 1
LD 1 1
LDF 43
AP 2	 ;      next_coordinate(dir,coordinate)
ST 0 2
LD 1 0
LD 0 2
LDF 245
AP 2	 ;      map_item(map,_nextCoord)
LDC 0
CEQ
LDC 0
CEQ
TSEL 291 297
LD 0 2
LD 0 0
CONS
ST 0 0
LDC 1
TSEL 297 0


LDC 1
LD 0 1
ADD
ST 0 1
LDC 1
TSEL 271 303

LD 0 0
RTN
RTN
RTN
LDC -1
LDC -1
LDF 313
AP 2
LDC 1
TSEL 338 0
LDC 0
LDC 1
SUB
ST 0 0

LD 1 0
ST 0 1

LD 0 1
LDF 28
AP 1	 ;      lempty(curr_element)
LDC 0
CEQ
LDC 0
CEQ
TSEL 335 327

LD 0 1
CAR
ST 0 0

LD 0 1
CDR
ST 0 1
LDC 1
TSEL 319 335

LD 0 0
RTN
RTN
RTN
LDC -1
LDC -1
LDF 345
AP 2
LDC 1
TSEL 399 0

LD 1 0
ST 0 0

LD 0 0
LDF 28
AP 1	 ;      lempty(curr_element)
LDC 0
CEQ
LDC 0
CEQ
TSEL 396 355

LD 0 0
CAR
LDC 1
LDF 4
AP 2
ST 0 1
LD 0 1
LDC 0
LDF 4
AP 2
LD 1 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 1
LDC 1
LDF 4
AP 2
LD 1 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 387 391
LDC 1
RTN
LDC 1
TSEL 391 0


LD 0 0
CDR
ST 0 0
LDC 1
TSEL 347 396

LDC 0
RTN
RTN
RTN
LDC -1
LDC -1
LDF 406
AP 2
LDC 1
TSEL 457 0

LD 1 0
ST 0 0

LD 0 0
LDF 28
AP 1	 ;      lempty(curr_element)
LDC 0
CEQ
LDC 0
CEQ
TSEL 454 416

LD 0 0
CAR
ST 0 1
LD 0 1
LDC 0
LDF 4
AP 2
LD 1 1
LDC 0
LDF 4
AP 2
CEQ
LDC 1
CEQ
LD 0 1
LDC 1
LDF 4
AP 2
LD 1 1
LDC 1
LDF 4
AP 2
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 445 449
LDC 1
RTN
LDC 1
TSEL 449 0


LD 0 0
CDR
ST 0 0
LDC 1
TSEL 408 454

LDC 0
RTN
RTN
RTN
LDC -1
LDC -1
LDC -1
LDF 465
AP 3
LDC 1
TSEL 495 0
LDC 0
ST 0 0

LD 1 0
ST 0 1

LD 0 1
LDF 28
AP 1	 ;      lempty(curr_element)
LDC 0
CEQ
LDC 0
CEQ
TSEL 492 477

LD 0 1
CAR
ST 0 2
LD 0 2
LDC 1
LDF 4
AP 2
LD 0 0
CONS
ST 0 0

LD 0 1
CDR
ST 0 1
LDC 1
TSEL 469 492

LD 0 0
RTN
RTN
RTN
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDF 508
AP 8
LDC 1
TSEL 679 0
LDC 0
ST 0 0

LD 1 2
ST 0 1

LD 0 1
LDF 28
AP 1	 ;      lempty(curr_element)
LDC 0
CEQ
LDC 0
CEQ
TSEL 676 520

LDC 7000
LD 0 1
CAR
LDF 36
AP 2	 ;      debug_i(7000,lfirst(curr_element))
ST 0 2
LD 0 2
LDC 2
LDF 4
AP 2
ST 0 3
LD 0 2
LDC 1
LDF 4
AP 2
ST 0 4
LD 0 4
LDC 0
LDF 4
AP 2
LD 1 1
LDC 0
LDF 4
AP 2
LDC 2
SUB
CGT
LDC 1
CEQ
LD 1 1
LDC 0
LDF 4
AP 2
LDC 2
ADD
LD 0 4
LDC 0
LDF 4
AP 2
CGT
LDC 1
CEQ
ADD
LDC 2
CEQ
LDC 1
CEQ
LD 0 4
LDC 1
LDF 4
AP 2
LD 1 1
LDC 1
LDF 4
AP 2
LDC 2
SUB
CGT
LDC 1
CEQ
ADD
LDC 2
CEQ
LDC 1
CEQ
LD 1 1
LDC 1
LDF 4
AP 2
LDC 2
ADD
LD 0 4
LDC 1
LDF 4
AP 2
CGT
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 602 667
LDC 8000
LD 0 3
LDC 2
ADD
LDF 36
AP 2	 ;      debug_i(8000,ghost_dir+2)
ST 0 5
LD 0 5
LDC 3
CGT
TSEL 613 619
LD 0 5
LDC 4
SUB
ST 0 5
LDC 1
TSEL 619 0


LDC 0
ST 0 6

LDC 4
LD 0 6
CGT
LDC 0
CEQ
TSEL 665 627

LD 0 6
LD 0 4
LDF 43
AP 2	 ;      next_coordinate(dir,ghost_coord)
ST 0 7
LD 0 6
LD 0 5
CEQ
LDC 0
CEQ
LDC 1
CEQ
LD 1 0
LD 0 7
LDF 245
AP 2	 ;      map_item(map,_nextCoord)
LDC 0
CEQ
LDC 0
CEQ
LDC 1
CEQ
ADD
LDC 2
CEQ
TSEL 653 659
LD 0 7
LD 0 0
CONS
ST 0 0
LDC 1
TSEL 659 0


LDC 1
LD 0 6
ADD
ST 0 6
LDC 1
TSEL 621 665

LDC 1
TSEL 667 0

LD 0 4
LD 0 0
CONS
ST 0 0

LD 0 1
CDR
ST 0 1
LDC 1
TSEL 512 676

LD 0 0
RTN
RTN
RTN
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDC -1
LDF 715
AP 31
LDC 1
TSEL 1143 0
LD 1 1
LDC 0
LDF 4
AP 2
ST 0 0
LD 1 1
LDC 1
LDF 4
AP 2
ST 0 1
LD 1 1
LDC 2
LDF 4
AP 2
ST 0 2
LD 1 1
LDC 3
LDF 4
AP 2
ST 0 3
LD 0 1
LDC 1
LDF 4
AP 2
ST 0 4
LD 0 1
LDC 2
LDF 4
AP 2
ST 0 5
LD 0 1
LDC 0
LDF 4
AP 2
ST 0 6
LD 0 5
ST 0 7
LDC 2000
LDC 0
LDF 36
AP 2	 ;      debug_i(2000,nil)
ST 0 8
LD 0 5
LD 0 4
LDF 43
AP 2	 ;      next_coordinate(current_direction,current_coordinate)
ST 0 9
LD 0 0
LD 0 9
LDF 245
AP 2	 ;      map_item(map,map_coodinate_in_default_direction)
ST 0 10
LDC 5000
LD 0 0
LD 0 4
LD 0 2
LDF 496
AP 3	 ;      get_next_ghost_coords(map,current_coordinate,gostsStatuses)
LDF 36
AP 2	 ;      debug_i(5000,get_next_ghost_coords(map,current_coordinate,gostsStatuses))
ST 0 11
LD 0 6
LDC 137
CGT
ST 0 12
LD 0 10
LDC 0
CEQ
LDC 1
CEQ
LD 0 11
LD 0 9
LDF 400
AP 2	 ;      lcontains_cell(next_ghost_possible_coords,map_coodinate_in_default_direction)
LDC 1
CEQ
ADD
LDC 0
CGT
LDC 1
CEQ
LD 0 10
LDC 2
CEQ
LDC 0
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
LDC 1
CEQ
LD 0 10
LDC 3
CEQ
LDC 0
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
TSEL 819 1137
LD 0 0
LD 0 4
LDF 260
AP 2	 ;      possible_cells(map,current_coordinate)
ST 0 13
LD 0 5
ST 0 14

LD 0 13
ST 0 15

LD 0 15
LDF 28
AP 1	 ;      lempty(the_cell)
LDC 0
CEQ
LDC 0
CEQ
TSEL 909 836

LDC 5001
LD 0 15
CAR
LDF 36
AP 2	 ;      debug_i(5001,lfirst(the_cell))
ST 0 16
LD 0 12
LDC 1
CEQ
LD 0 11
LD 0 16
LDF 400
AP 2	 ;      lcontains_cell(next_ghost_possible_coords,possible_cell)
LDC 0
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
TSEL 857 904
LD 0 4
LD 0 16
LDF 116
AP 2	 ;      direction_by_coordinate(current_coordinate,possible_cell)
ST 0 17
LD 0 0
LD 0 16
LDF 245
AP 2	 ;      map_item(map,possible_cell)
LDC 2
CEQ
LDC 1
CEQ
LD 0 0
LD 0 16
LDF 245
AP 2	 ;      map_item(map,possible_cell)
LDC 4
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
LDC 1
CEQ
LD 0 0
LD 0 16
LDF 245
AP 2	 ;      map_item(map,possible_cell)
LDC 3
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
TSEL 895 902
LD 1 0
LD 0 17
LDF 39
AP 2	 ;      result(state,selected_direction)
RTN
LDC 1
TSEL 902 0

LDC 1
TSEL 904 0


LD 0 15
CDR
ST 0 15
LDC 1
TSEL 828 909

LDC 0
ST 0 18

LD 0 13
ST 0 19

LD 0 19
LDF 28
AP 1	 ;      lempty(the_next_cell)
LDC 0
CEQ
LDC 0
CEQ
TSEL 964 921

LD 0 19
CAR
ST 0 20
LD 0 12
LDC 1
CEQ
LD 0 11
LD 0 20
LDF 400
AP 2	 ;      lcontains_cell(next_ghost_possible_coords,next_cell_in_base_wave)
LDC 0
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
TSEL 939 959
LD 0 4
LD 0 20
LDF 116
AP 2	 ;      direction_by_coordinate(current_coordinate,next_cell_in_base_wave)
ST 0 17
LDC 3000
LD 0 17
LDC 0
CONS
LD 0 20
LDC 0
CONS
CONS
LD 0 18
CONS
LDF 36
AP 2	 ;      debug_i(3000,ladd([[selected_direction,nil],next_cell_in_base_wave,nil],base_wave))
ST 0 18
LDC 1
TSEL 959 0


LD 0 19
CDR
ST 0 19
LDC 1
TSEL 913 964

LDC 0
ST 0 21
LDC 0
ST 0 22

LD 0 18
ST 0 23

LD 0 23
LDF 28
AP 1	 ;      lempty(current_wave)
LDC 0
CEQ
LDC 0
CEQ
TSEL 1130 978

LDC 0
ST 0 21

LD 0 23
ST 0 24

LD 0 24
LDF 28
AP 1	 ;      lempty(waveiterator)
LDC 0
CEQ
LDC 0
CEQ
TSEL 1121 990

LDC 1001
LD 0 24
CAR
LDF 36
AP 2	 ;      debug_i(1001,lfirst(waveiterator))
ST 0 25
LDC 1002
LD 0 25
LDC 1
LDF 4
AP 2
LDF 36
AP 2	 ;      debug_i(1002,current_wave_item[1])
ST 0 26
LDC 1003
LD 0 25
LDC 0
LDF 4
AP 2
LDF 36
AP 2	 ;      debug_i(1003,current_wave_item[0])
ST 0 27
LDC 600
LD 0 0
LD 0 26
LDF 260
AP 2	 ;      possible_cells(map,current_wave_coord)
LDF 36
AP 2	 ;      debug_i(600,possible_cells(map,current_wave_coord))
ST 0 13

LD 0 13
ST 0 28

LD 0 28
LDF 28
AP 1	 ;      lempty(possible_wave_cell)
LDC 0
CEQ
LDC 0
CEQ
TSEL 1116 1030

LDC 650
LD 0 28
CAR
LDF 36
AP 2	 ;      debug_i(650,lfirst(possible_wave_cell))
ST 0 29
LDC 700
LD 0 26
LD 0 29
LDF 116
AP 2	 ;      direction_by_coordinate(current_wave_coord,current_possible_wave_cell)
LDF 36
AP 2	 ;      debug_i(700,direction_by_coordinate(current_wave_coord,current_possible_wave_cell))
ST 0 17
LD 0 0
LD 0 29
LDF 245
AP 2	 ;      map_item(map,current_possible_wave_cell)
LDC 2
CEQ
LDC 1
CEQ
LD 0 0
LD 0 29
LDF 245
AP 2	 ;      map_item(map,current_possible_wave_cell)
LDC 3
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
LDC 1
CEQ
LD 0 0
LD 0 29
LDF 245
AP 2	 ;      map_item(map,current_possible_wave_cell)
LDC 4
CEQ
LDC 1
CEQ
ADD
LDC 0
CGT
TSEL 1077 1086
LD 1 0
LD 0 27
LDF 307
AP 1	 ;      last_element(current_wave_directions)
LDF 39
AP 2	 ;      result(state,last_element(current_wave_directions))
RTN
LDC 1
TSEL 1086 0

LD 0 17
LD 0 27
CONS
ST 0 30
LD 0 22
LD 0 29
LDF 400
AP 2	 ;      lcontains_cell(visited_cells,current_possible_wave_cell)
LDC 0
CEQ
TSEL 1097 1111
LD 0 29
LD 0 22
CONS
ST 0 22
LD 0 30
LD 0 29
LDC 0
CONS
CONS
LD 0 21
CONS
ST 0 21
LDC 1
TSEL 1111 0


LD 0 28
CDR
ST 0 28
LDC 1
TSEL 1022 1116


LD 0 24
CDR
ST 0 24
LDC 1
TSEL 982 1121

LDC 4000
LD 0 21
LDF 36
AP 2	 ;      debug_i(4000,nex_wave)
ST 0 23

LD 0 21
ST 0 23
LDC 1
TSEL 970 1130

LD 1 0
LD 0 14
LDF 39
AP 2	 ;      result(state,last_available_direction)
RTN
LDC 1
TSEL 1137 0

LD 1 0
LD 0 7
LDF 39
AP 2	 ;      result(state,next_direction)
RTN
RTN
RTN